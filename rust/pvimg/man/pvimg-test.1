.\" Copyright 2024 IBM Corp.
.\" s390-tools is free software; you can redistribute it and/or modify
.\" it under the terms of the MIT license. See LICENSE for details.
.\"

.TH pvimg-test 1 "2024-12-11" "s390-tools" "Pvimg Manual"
.nh
.ad l
.SH NAME
\fBpvimg test\fP \- Test different aspects of an existing IBM Secure Execution image
\fB
.SH SYNOPSIS
.nf
.fam C
pvimg test <--host-key-document <FILE>|--key-hashes[=<FILE>]> <INPUT>
.fam C
.fi
.SH DESCRIPTION
Test different aspects of an existing IBM Secure Execution image
.SH OPTIONS
.PP
<INPUT>
.RS 4
Use INPUT as the Secure Execution image.
.RE
.RE

.PP
\-k, \-\-host\-key\-document <FILE>
.RS 4
Use FILE to check for a host key document. Verifies that the image contains the
host key hash of one of the specified host keys. The check fails if none of the
host keys match the hash in the image. This parameter can be specified multiple
times. Mutually exclusive with \fB\-\-key\-hashes\fR.
.RE
.RE
.PP
\-\-key\-hashes[=<FILE>]
.RS 4
Use FILE to check for the host key hashes provided by the ultravisor. If no FILE
is specified, FILE defaults to \fB/sys/firmware/uv/keys/all\fR. The default file
is only available if the local system supports the Query Ultravisor Keys UVC.
Verifies that the image contains the host key hash of one of the specified
hashes in FILE. The check fails if none of the host keys match a hash in the
response. Mutually exclusive with \fB\-\-host\-key\-document\fR.
.RE
.RE
.PP
\-h, \-\-help
.RS 4
Print help (see a summary with \fB\-h\fR).
.RE
.RE

.SH EXIT STATUS
.TP 8
.B 0 \- Program finished successfully
The command was executed successfully.
.RE
.TP 8
.B 1 \- Generic error
Something went wrong during the operation. Refer to the error
message.
.RE
.TP 8
.B 2 \- Usage error
The command was used incorrectly, for example: unsupported command
line flag, or wrong number of arguments.
.RE
.SH "SEE ALSO"
.sp
\fBpvimg\fR(1) \fBzipl\fR(8) \fBqemu\fR(1)
